# https://llvm.org/docs/CommandGuide/lit.html
import os
import lit.formats

target_files = r"@TARGET_FILES@".split()
target_environments = @TARGET_ENVIRONMENTS@

config.name = r"@TEST_NAME@"
config.test_format = lit.formats.ShTest(True)
config.test_source_root = r"@CMAKE_CURRENT_SOURCE_DIR@"
config.test_exec_root = os.path.join(os.path.abspath(__file__), os.pardir)
config.suffixes = [".lit"]
for target_file, target_environment in zip(target_files, target_environments):
    target_filename = os.path.basename(target_file)
    config.substitutions.append(
        ("%" + target_filename, target_environment + " " + target_file))
